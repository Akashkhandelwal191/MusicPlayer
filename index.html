<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Music Player</title>
    <link rel="icon" href="Favicon/th-removebg-preview.png">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- External Css -->
    <link rel="stylesheet" href="Css/style.css">
    <link rel="stylesheet" href="Css/all.css">
    
</head>

<body>
    <video autoplay loop class="video-background" muted plays-inline>
        <source src="Bubble_Background1.mp4" type="video/mp4">
    </video>

    <div class="container">

        <div class="row">
            <div class="col-12">
                <header class="header">
                    <i class="fas fa-headphones-alt fa-2x text-white"></i>
                    <span class="text-white h2 mx-2">Music Player</span>
                    <i class="fas fa-bars fa-2x text-white float-end" id="ToggleMenu"></i>
                </header>


                <div class="music_container">
                    <h2 id="title">NIVIRO</h2>
                    <h3 id="artist">Jarico</h3>
                    <div class="img-container">
                        <img src="images/music-1.jpg" alt="" srcset="">
                    </div>
                    <audio src="Music/music-1.mp3"></audio>

                    <!-- progress bar -->
                    <div class="progressbar_container" id="progress_container">
                        <div class="progress_duration_meter">
                            <div id="current_time">0:00</div>
                            <div id="duration">0:00</div>
                        </div>

                        <div class="progress_div" id="progress_div">
                            <div class="progress" id="progress"></div>
                        </div>

                    </div>


                    <!-- controls -->
                    <div class="music_controls">
                        <i class="fas fa-backward" id="prev" title="Previous"></i>
                        <i class="fas fa-play main_button" id="play" title="Play"></i>
                        <i class="fas fa-forward" id="next" title="Next"></i>


                    </div>


                </div>


            </div>




        </div>

        <div class="Sidebar" id="SidebarShow">
            <div class="Sidebar-Head">
                <input type="text" name="" placeholder="Search Songs...." id="searchtxt">

                <i class="fas fa-search" id="searchbtn"></i>
                <i class="fas fa-times-circle" id="closebtn"></i>
            </div>


            <div class="Sidebar-body" id="Sidebar-body1">

                <div class="songs" onclick="Preload(0)">

                    <div class="songs-body-details">
                        <h2><span><i class="fas fa-music"></i> </span> NIVIRO Flares</h2>
                        <h4>Jarico</h4>
                        <p>Realase by Ncs Music</p>
                    </div>
                </div>
    

                <div class="songs" onclick="Preload(1)">

                    <div class="songs-body-details">
                        <h2><span><i class="fas fa-music"></i> </span>Jarico Ocean</h2>
                        <h4>Jarico</h4>
                        <p>Realase by Ncs Music</p>
                    </div>
            
                </div>
                

                <div class="songs" onclick="Preload(2)">

                    <div class="songs-body-details">
                        <h2><span><i class="fas fa-music"></i> </span>Event Depature</h2>
                        <h4>Slient Partner</h4>
                        <p>Realase by Ncs Music</p>
                    </div>
            
                </div>


                <div class="songs" onclick="Preload(3)">

                    <div class="songs-body-details">
                        <h2><span><i class="fas fa-music"></i> </span>Ae Watan(Raazi)</h2>
                        <h4>Arijit Singh</h4>
                        <p>Mp3PagalWorld.Com</p>
                    </div>
        
                </div>
    

                <div class="songs" onclick="Preload(4)">

                    <div class="songs-body-details">
                        <h2><span><i class="fas fa-music"></i> </span>Shape Of You</h2>
                        <h4>Ed Sheeran</h4>
                        <p>DjjOhAL.Com</p>
                    </div>
            
                </div>


                <div class="songs" onclick="Preload(5)">

                    <div class="songs-body-details">
                        <h2><span><i class="fas fa-music"></i> </span>Lo Safar</h2>
                        <h4>Jubin Nautiyal</h4>
                        <p>Mr-Song.Com</p>
                    </div>
        
                </div>
        

                <div class="songs" onclick="Preload(6)">

                    <div class="songs-body-details">
                        <h2><span><i class="fas fa-music"></i> </span>Ishq Mubarak</h2>
                        <h4>Arjit Singh</h4>
                        <p>Mp3PagalWorld.Com</p>
                    </div>
    
                </div>
                





            </div>

        </div>

    </div>



    <!-- Script Section Start -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/js/bootstrap.bundle.min.js"></script>


    <script>
        const music = document.querySelector('audio');
        const play = document.getElementById("play");
        const img = document.querySelector('img');
        const artist = document.getElementById('artist');
        const title = document.getElementById('title');
        const prev = document.getElementById("prev");
        const next = document.getElementById("next");
        const ToggleMenu = document.getElementById("ToggleMenu");
        const closebtn = document.getElementById("closebtn");
        let progress = document.getElementById('progress');
        let total_duration = document.getElementById('duration');
        let current_time = document.getElementById('current_time');
        const progress_div = document.getElementById('progress_div');
        let Sidebar_body = document.getElementById('Sidebar-body1');




        //To search in a notes 
        let search = document.getElementById('searchtxt');
        search.addEventListener("input", function () {

            let inputVal = search.value.toLowerCase();
            let songs = document.getElementsByClassName('songs');
            Array.from(songs).forEach(function (element) {


               console.log(element); 
               let cardTxt = element.getElementsByTagName('h2')[0].innerText.toLowerCase();
               console.log(cardTxt);
               if (cardTxt.includes(inputVal)) {
                element.style.display = "block";
             }
             else {
                    element.style.display = "none";
              }

            })

        })



        ToggleMenu.addEventListener('click', () => {

            document.getElementById('SidebarShow').style.right = "0px";
        })


        closebtn.addEventListener('click', () => {

            document.getElementById('SidebarShow').style.right = "-500px";
        })


        const songs = [{
            name: "music-1",
            title: "niviro",
            artist: "jarico",
        },
        {
            name: "music-2",
            title: "ocean",
            artist: "jarico",
        },
        {
            name: "music-3",
            title: "Event Depature",
            artist: "Slient Partner",
        },
        {
            name: "music-4",
            title: "Ae Watan(Raazi)",
            artist: "Arijit Singh",
        },
        {
            name: "music-5",
            title: "Shape Of You",
            artist: "Ed Sheeran",
        },
        {
            name: "music-6",
            title: "Lo Safar(Baaghi2)",
            artist: "Jubin Nautiyal",
        },
        {
            name: "music-7",
            title: "Ishq Mubarak",
            artist: "Arjit Singh",
        }

        ]
        let isPlaying = false;

        //for play funtion
        const playmusic = () => {

            music.play();
            isPlaying = true;
            play.classList.replace('fa-play', "fa-pause");
            // img.classList.add('anime');
        }

        //for pause function

        const pausemusic = () => {

            music.pause();
            isPlaying = false;
            play.classList.replace('fa-pause', "fa-play");
            // img.classList.remove('anime');
        }


        play.addEventListener('click', () => {

            isPlaying ? pausemusic() : playmusic();

        });


        //changing the music data
        const loadSong = (songs) => {
            title.textContent = songs.title;
            artist.textContent = songs.artist;
            music.src = "Music/" + songs.name + ".mp3";
            img.src = "images/" + songs.name + ".jpg";

        }


        songIndex = 0;
        loadSong(songs[songIndex]);

        // Sidebar Menu Songs Functaionality  
        function Preload(PreIndex) {
            songIndex = PreIndex;
            loadSong(songs[songIndex]);
            playmusic();
        }

        const nextSong = () => {
            songIndex = (songIndex + 1) % songs.length;
            loadSong(songs[songIndex]);
            playmusic();

        }

        const prevSong = () => {
            songIndex = (songIndex - 1 + songs.length) % songs.length;
            loadSong(songs[songIndex]);
            playmusic();


        }

        // Progress Work

        music.addEventListener('timeupdate', (event) => {
            const { currentTime, duration } = event.srcElement;
            let progress_time = (currentTime / duration) * 100;
            progress.style.width = `${progress_time}%`;

            // music duration update
            let min_duration = Math.floor(duration / 60);
            let sec_duration = Math.floor(duration % 60);

            let tot_duration = `${min_duration}:${sec_duration}`;

            if (duration) {
                total_duration.textContent = `${tot_duration}`;
            }


            // Current_time duration update
            let min_time = Math.floor(currentTime / 60);
            let sec_time = Math.floor(currentTime % 60);


            if (sec_time < 10) {
                sec_time = `0${sec_time}`;
            }
            let tot_time = `${min_time}:${sec_time}`;
            current_time.textContent = `${tot_time}`;



        });

        // Progress onclick function
        progress_div.addEventListener('click', (event) => {

            const { duration } = music;

            let move_progress = (event.offsetX / event.srcElement.clientWidth) * duration;
            music.currentTime = move_progress;



        });



        //if music end next song play
        music.addEventListener("ended", nextSong);
        next.addEventListener("click", nextSong);
        prev.addEventListener("click", prevSong);

    </script>






</body>

</html>